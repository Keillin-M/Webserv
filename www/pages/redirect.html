<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect Tests | Webserv</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .redirect-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .redirect-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .redirect-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .redirect-card h2 {
            font-size: 2.5rem;
            margin: 0 0 5px 0;
        }
        
        .redirect-card .name { font-size: 1rem; margin-bottom: 10px; }
        .redirect-card .desc { color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 15px; }
        .redirect-card .btn { width: 100%; padding: 12px; }
        
        .card-302 { border-color: var(--accent-purple); }
        .card-302 h2 { color: var(--accent-purple); }
        
        .card-307 { border-color: var(--accent-green); }
        .card-307 h2 { color: var(--accent-green); }
        
        .info-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .info-box h3 { margin-top: 0; color: var(--accent-purple); }
        
        .curl-box {
            background: #1a1a2e;
            border-radius: 6px;
            padding: 12px 15px;
            font-family: monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 8px 0;
            cursor: pointer;
        }
        
        .curl-box:hover { background: #252540; }
        
        .warning-box {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid var(--warning);
            border-radius: 8px;
            padding: 15px 20px;
            margin-top: 25px;
        }
        
        .warning-box h3 { margin-top: 0; color: var(--warning); }
    </style>
</head>
<body>
    <div class="hero">
        <img src="../assets/img/hero.svg" alt="Webserv" class="hero-image">
        <h1>HTTP Redirect Tests</h1>
        <p>Test different redirect status codes</p>
    </div>

    <div class="container">
        <nav class="nav">
            <a href="../index.html" class="nav-btn">Home</a>
            <a href="get.html" class="nav-btn">GET Tests</a>
            <a href="post.html" class="nav-btn">POST Tests</a>
            <a href="delete.html" class="nav-btn">DELETE Tests</a>
            <a href="redirect.html" class="nav-btn active">Redirections</a>
            <a href="errors.html" class="nav-btn">Error Pages</a>
            <a href="cgi.html" class="nav-btn">CGI Tests</a>
            <a href="about.html" class="nav-btn">About</a>
        </nav>

        <!-- Browser-safe redirects -->
        <h3 style="margin-top: 30px;">Temporary Redirects (Browser Safe)</h3>
        <div class="redirect-grid">
            <div class="redirect-card card-302">
                <h2>302</h2>
                <p class="name">Found</p>
                <p class="desc">Temporary redirect. Not cached by browsers.</p>
                <a href="/redirect-302" class="btn">Test 302</a>
            </div>
            
            <div class="redirect-card card-307">
                <h2>307</h2>
                <p class="name">Temporary Redirect</p>
                <p class="desc">Temporary redirect. Preserves HTTP method.</p>
                <a href="/redirect-307" class="btn btn-success">Test 307</a>
            </div>
        </div>

        <!-- Cache warning -->
        <div class="warning-box">
            <h3>About Browser Cache and Redirects</h3>
            <p>Permanent redirects (301, 308) are <strong>cached by browsers</strong>. Once a browser sees a 301 or 308, it remembers the redirect and skips the server on future requests.</p>
            <p>This is correct HTTP behaviour, but it makes browser testing difficult. Use <strong>curl</strong> in the terminal to test permanent redirects reliably.</p>
        </div>

        <!-- Curl tests for permanent redirects -->
        <div class="info-box">
            <h3>Test Permanent Redirects with curl</h3>
            <p>Copy and paste these commands in your terminal:</p>
            
            <p style="margin-top: 15px; color: var(--accent-blue);"><strong>301 Moved Permanently:</strong></p>
            <div class="curl-box">curl -I http://localhost:8080/redirect-301</div>
            
            <p style="margin-top: 15px; color: var(--warning);"><strong>308 Permanent Redirect:</strong></p>
            <div class="curl-box">curl -I http://localhost:8080/redirect-308</div>
            
            <p style="margin-top: 20px; color: var(--text-secondary);">Expected: <code>HTTP/1.1 301</code> or <code>HTTP/1.1 308</code> with <code>Location</code> header.</p>
        </div>

        <!-- All curl commands -->
        <div class="info-box">
            <h3>All Redirect Tests (curl)</h3>
            <div class="curl-box">curl -I http://localhost:8080/redirect-301</div>
            <div class="curl-box">curl -I http://localhost:8080/redirect-302</div>
            <div class="curl-box">curl -I http://localhost:8080/redirect-307</div>
            <div class="curl-box">curl -I http://localhost:8080/redirect-308</div>
        </div>
    </div>
</body>
</html>
