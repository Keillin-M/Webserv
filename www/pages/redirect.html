<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect Tests | Webserv</title>
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
    <!-- Hero Section -->
    <div class="hero">
        <img src="../assets/img/hero.svg" alt="Webserv Test Playground" class="hero-image">
        <h1>HTTP Redirect Tests</h1>
        <p>Test 301, 302, 307, and 308 redirections</p>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Navigation -->
        <nav class="nav">
            <a href="../index.html" class="nav-btn">Home</a>
            <a href="get.html" class="nav-btn">GET Tests</a>
            <a href="post.html" class="nav-btn">POST Tests</a>
            <a href="delete.html" class="nav-btn">DELETE Tests</a>
            <a href="redirect.html" class="nav-btn active">Redirections</a>
            <a href="errors.html" class="nav-btn">Error Pages</a>
            <a href="cgi.html" class="nav-btn">CGI Tests</a>
            <a href="about.html" class="nav-btn">About</a>
        </nav>

        <!-- About Redirects -->
        <div class="card">
            <h2>About HTTP Redirects</h2>
            <p>Redirects tell the browser that a resource has moved. The server responds with a <strong>3xx status code</strong> and a <strong>Location header</strong>.</p>
            
            <div style="margin-top: 20px;">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                    <tr style="background: var(--bg-tertiary);">
                        <th style="padding: 10px; text-align: left; border-bottom: 1px solid var(--border);">Code</th>
                        <th style="padding: 10px; text-align: left; border-bottom: 1px solid var(--border);">Type</th>
                        <th style="padding: 10px; text-align: left; border-bottom: 1px solid var(--border);">Method</th>
                        <th style="padding: 10px; text-align: left; border-bottom: 1px solid var(--border);">Use Case</th>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);"><strong style="color: var(--accent-purple);">301</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">Permanent</td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">May change to GET</td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">Page moved forever (SEO)</td>
                    </tr>
                    <tr style="background: var(--bg-tertiary);">
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);"><strong style="color: var(--accent-blue);">302</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">Temporary</td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">May change to GET</td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">Temporary move</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);"><strong style="color: var(--accent-green);">307</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">Temporary</td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);"><strong style="color: var(--accent-green);">Preserved</strong></td>
                        <td style="padding: 10px; border-bottom: 1px solid var(--border);">Form redirect (POST stays POST)</td>
                    </tr>
                    <tr style="background: var(--bg-tertiary);">
                        <td style="padding: 10px;"><strong style="color: var(--error);">308</strong></td>
                        <td style="padding: 10px;">Permanent</td>
                        <td style="padding: 10px;"><strong style="color: var(--accent-green);">Preserved</strong></td>
                        <td style="padding: 10px;">API endpoint moved (POST stays POST)</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Test Redirects -->
        <div class="card">
            <h2>Test Redirects</h2>
            <p>Click to test each redirect. Browser follows automatically to <code>/pages/about.html</code>.</p>
            
            <div class="test-grid" style="margin-top: 20px;">
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">301 Permanent</h3>
                    <p>Redirects to About page</p>
                    <code style="font-size: 0.85rem;">/redirect/301</code>
                    <a href="/redirect/301" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Test 301</a>
                </div>
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">302 Found</h3>
                    <p>Temporary redirect</p>
                    <code style="font-size: 0.85rem;">/redirect/302</code>
                    <a href="/redirect/302" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Test 302</a>
                </div>
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">307 Temporary</h3>
                    <p>Method preserved</p>
                    <code style="font-size: 0.85rem;">/redirect/307</code>
                    <a href="/redirect/307" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Test 307</a>
                </div>
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">308 Permanent</h3>
                    <p>Method preserved</p>
                    <code style="font-size: 0.85rem;">/redirect/308</code>
                    <a href="/redirect/308" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Test 308</a>
                </div>
            </div>
        </div>

        <!-- External Redirects with http.cat -->
        <div class="card">
            <h2>External Redirects (http.cat)</h2>
            <p>These links go directly to http.cat to show the status code images:</p>
            
            <div class="test-grid" style="margin-top: 20px;">
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">301 Cat</h3>
                    <p>Moved Permanently</p>
                    <a href="https://http.cat/301" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Open</a>
                </div>
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">302 Cat</h3>
                    <p>Found</p>
                    <a href="https://http.cat/302" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Open</a>
                </div>
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">307 Cat</h3>
                    <p>Temporary Redirect</p>
                    <a href="https://http.cat/307" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Open</a>
                </div>
                <div class="test-card">
                    <h3 style="color: var(--accent-green);">308 Cat</h3>
                    <p>Permanent Redirect</p>
                    <a href="https://http.cat/308" target="_blank" class="btn" style="display: inline-block; margin-top: 10px;">Open</a>
                </div>
            </div>
        </div>

        <!-- How to Verify -->
        <div class="card">
            <h2>How to Verify</h2>
            <div style="padding: 15px; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid var(--accent-green);">
                <p style="margin: 0;"><strong style="color: var(--accent-green);">If you reach the About page after clicking a test button, the redirect worked correctly.</strong></p>
                <p style="margin: 10px 0 0 0; color: var(--text-secondary); font-size: 0.9rem;">
                    Browsers follow redirects automatically. To see the actual 3xx response, use DevTools (Network tab) or <code>curl -v http://localhost:8080/redirect/301</code>
                </p>
            </div>
        </div>
    </div>
</body>
</html>
